{
  "info": {
    "_postman_id": "5f7df3d9-3ee0-4873-a4a1-b298d1d03f87",
    "name": "SmartPack Backend - Complete API",
    "description": "Colección completa de endpoints para SmartPack Backend: Auth, Users, Roles, Areas, Warehouses y Assignments",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "38493185"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "default"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "default"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "/auth/register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"nuevo.usuario@ekiproject.cl\",\n  \"password\": \"Password123!@#\",\n  \"firstName\": \"Nuevo\",\n  \"lastName\": \"Usuario\",\n  \"rut\": \"12.345.678-9\",\n  \"phone\": \"+56912345678\",\n  \"roleId\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "/auth/login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const jsonData = pm.response.json();",
                  "if (jsonData.accessToken) {",
                  "    pm.collectionVariables.set(\"accessToken\", jsonData.accessToken);",
                  "    console.log(\"✓ Token guardado en accessToken\");",
                  "} else {",
                  "    console.warn(\"✗ No se encontró token en la respuesta\");",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"fdcg.contacto1@gmail.com\",\n  \"password\": \"Admin123!@#\"\n}"
            },
            "url": {
              "raw": "{{base_url}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "/auth/google",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/google",
              "host": ["{{base_url}}"],
              "path": ["auth", "google"]
            }
          },
          "response": []
        },
        {
          "name": "/auth/me",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "/users",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"usuario.nuevo@ekiproject.cl\",\n  \"password\": \"Password123!@#\",\n  \"firstName\": \"Usuario\",\n  \"lastName\": \"Nuevo\",\n  \"rut\": \"15.123.456-7\",\n  \"phone\": \"+56987654321\",\n  \"roleId\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            }
          },
          "response": []
        },
        {
          "name": "/users/validate-unique",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rut\": \"12345678-9\",\n  \"email\": \"test@ekiproject.cl\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/validate-unique",
              "host": ["{{base_url}}"],
              "path": ["users", "validate-unique"]
            }
          },
          "response": []
        },
        {
          "name": "/users",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users?page=1&limit=10&search=&sortBy=createdAt&order=desc&roleId=&isEnabled=",
              "host": ["{{base_url}}"],
              "path": ["users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "order",
                  "value": "desc"
                },
                {
                  "key": "roleId",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "isEnabled",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "/users/me",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/me",
              "host": ["{{base_url}}"],
              "path": ["users", "me"]
            }
          },
          "response": []
        },
        {
          "name": "/users/area/{areaId}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/area/6ebee4b1-b76a-4aba-bb92-9fe76349bb77",
              "host": ["{{base_url}}"],
              "path": ["users", "area", "6ebee4b1-b76a-4aba-bb92-9fe76349bb77"]
            }
          },
          "response": []
        },
        {
          "name": "/users/{id}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/37b6119d-6bb0-48c1-978d-f68c76bf65de",
              "host": ["{{base_url}}"],
              "path": ["users", "37b6119d-6bb0-48c1-978d-f68c76bf65de"]
            }
          },
          "response": []
        },
        {
          "name": "/users/{id}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+56987654321\",\n  \"isEnabled\": false,\n  \"reason\": \"Usuario inactivo por solicitud\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/37b6119d-6bb0-48c1-978d-f68c76bf65de",
              "host": ["{{base_url}}"],
              "path": ["users", "37b6119d-6bb0-48c1-978d-f68c76bf65de"]
            }
          },
          "response": []
        },
        {
          "name": "/users/{id}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/ccea1f9f-6291-417d-9167-d478e5d6beee",
              "host": ["{{base_url}}"],
              "path": ["users", "ccea1f9f-6291-417d-9167-d478e5d6beee"]
            }
          },
          "response": []
        },
        {
          "name": "/users/{userId}/enablement-history",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/37b6119d-6bb0-48c1-978d-f68c76bf65de/enablement-history?page=1&limit=10&sortBy=occurredAt&order=desc",
              "host": ["{{base_url}}"],
              "path": [
                "users",
                "37b6119d-6bb0-48c1-978d-f68c76bf65de",
                "enablement-history"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "occurredAt"
                },
                {
                  "key": "order",
                  "value": "desc"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "/enablement-history (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/enablement-history?page=1&limit=10&sortBy=occurredAt&order=desc&userId=&action=",
              "host": ["{{base_url}}"],
              "path": ["enablement-history"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "occurredAt"
                },
                {
                  "key": "order",
                  "value": "desc"
                },
                {
                  "key": "userId",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "action",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Roles",
      "item": [
        {
          "name": "/roles",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/roles?page=1&limit=10&search=&sortBy=createdAt&order=desc&isEnabled=",
              "host": ["{{base_url}}"],
              "path": ["roles"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "order",
                  "value": "desc"
                },
                {
                  "key": "isEnabled",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Areas",
      "item": [
        {
          "name": "/areas",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Nueva Área\",\n  \"nodeType\": \"ROOT\",\n  \"parentAreaId\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/areas",
              "host": ["{{base_url}}"],
              "path": ["areas"]
            }
          },
          "response": []
        },
        {
          "name": "/areas",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/areas?page=1&limit=10&search=&sortBy=createdAt&order=desc&isEnabled=",
              "host": ["{{base_url}}"],
              "path": ["areas"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "order",
                  "value": "desc"
                },
                {
                  "key": "isEnabled",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "/areas/{id}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/areas/6ebee4b1-b76a-4aba-bb92-9fe76349bb77",
              "host": ["{{base_url}}"],
              "path": ["areas", "6ebee4b1-b76a-4aba-bb92-9fe76349bb77"]
            }
          },
          "response": []
        },
        {
          "name": "/areas/{id}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Área Actualizada\",\n  \"nodeType\": \"ROOT\",\n  \"parentAreaId\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/areas/6ebee4b1-b76a-4aba-bb92-9fe76349bb77",
              "host": ["{{base_url}}"],
              "path": ["areas", "6ebee4b1-b76a-4aba-bb92-9fe76349bb77"]
            }
          },
          "response": []
        },
        {
          "name": "/areas/{areaId}/managers",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/areas/6ebee4b1-b76a-4aba-bb92-9fe76349bb77/managers?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": [
                "areas",
                "6ebee4b1-b76a-4aba-bb92-9fe76349bb77",
                "managers"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "/areas/{areaId/history",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/areas/6ebee4b1-b76a-4aba-bb92-9fe76349bb77/history",
              "host": ["{{base_url}}"],
              "path": [
                "areas",
                "6ebee4b1-b76a-4aba-bb92-9fe76349bb77",
                "history"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Warehouses",
      "item": [
        {
          "name": "/warehouses",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/warehouses?page=1&limit=10&search=&sortBy=createdAt&order=desc&isEnabled=",
              "host": ["{{base_url}}"],
              "path": ["warehouses"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "sortBy",
                  "value": "createdAt"
                },
                {
                  "key": "order",
                  "value": "desc"
                },
                {
                  "key": "isEnabled",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "/warehouses/{id}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/warehouses/01921be2-9fd3-4d31-98d2-8a979193188a",
              "host": ["{{base_url}}"],
              "path": ["warehouses", "01921be2-9fd3-4d31-98d2-8a979193188a"]
            }
          },
          "response": []
        },
        {
          "name": "/warehouses/{warehouseId}/supervisors",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/warehouses/01921be2-9fd3-4d31-98d2-8a979193188a/supervisors?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": [
                "warehouses",
                "01921be2-9fd3-4d31-98d2-8a979193188a",
                "supervisors"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Assignments",
      "item": [
        {
          "name": "/areas/{areaId}/managers",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"managerId\": \"afad5af8-9110-4cad-9a1e-d937a435a827\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/areas/6ebee4b1-b76a-4aba-bb92-9fe76349bb77/managers",
              "host": ["{{base_url}}"],
              "path": [
                "areas",
                "6ebee4b1-b76a-4aba-bb92-9fe76349bb77",
                "managers"
              ]
            }
          },
          "response": []
        },
        {
          "name": "/areas/{areaId}/warehouses",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"warehouseId\": \"01921be2-9fd3-4d31-98d2-8a979193188a\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/areas/6ebee4b1-b76a-4aba-bb92-9fe76349bb77/warehouses",
              "host": ["{{base_url}}"],
              "path": [
                "areas",
                "6ebee4b1-b76a-4aba-bb92-9fe76349bb77",
                "warehouses"
              ]
            }
          },
          "response": []
        },
        {
          "name": "/warehouses/{warehouseId}/supervisors",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"supervisorId\": \"usuario-supervisor-id\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/warehouses/01921be2-9fd3-4d31-98d2-8a979193188a/supervisors",
              "host": ["{{base_url}}"],
              "path": [
                "warehouses",
                "01921be2-9fd3-4d31-98d2-8a979193188a",
                "supervisors"
              ]
            }
          },
          "response": []
        },
        {
          "name": "/assignments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/assignments?page=1&limit=10&sortBy=assignedAt&order=desc&isEnabled=",
              "host": ["{{base_url}}"],
              "path": ["assignments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sortBy",
                  "value": "assignedAt"
                },
                {
                  "key": "order",
                  "value": "desc"
                },
                {
                  "key": "isEnabled",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "/assignments/{id}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/assignments/88764947-d4a5-4876-a1da-44a14d94de0e",
              "host": ["{{base_url}}"],
              "path": ["assignments", "88764947-d4a5-4876-a1da-44a14d94de0e"]
            }
          },
          "response": []
        },
        {
          "name": "/assignment-history/user/{userId}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/assignment-history/user/afad5af8-9110-4cad-9a1e-d937a435a827?page=1&limit=50&sortBy=timestamp&order=desc",
              "host": ["{{base_url}}"],
              "path": [
                "assignment-history",
                "user",
                "afad5af8-9110-4cad-9a1e-d937a435a827"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                },
                {
                  "key": "sortBy",
                  "value": "timestamp"
                },
                {
                  "key": "order",
                  "value": "desc"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "/assignments/{id}",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/assignments/88764947-d4a5-4876-a1da-44a14d94de0e",
              "host": ["{{base_url}}"],
              "path": ["assignments", "88764947-d4a5-4876-a1da-44a14d94de0e"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
